---
import Main from "@/layouts/main.astro";
---

<Main>
    <form id="login-form" class="flex flex-col gap-4">
        <label>
            Email
            <input type="email" placeholder="Email" name="email" />
        </label>
        <label>
            Password
            <input type="password" placeholder="Password" name="password" />
        </label>
        <button type="submit">Login</button>
    </form>
</Main>

<script>
    import { authClient } from "@/lib/auth-client";

    const loginForm = document.getElementById("login-form") as HTMLFormElement;

    loginForm.addEventListener("submit", (e) => {
        e.preventDefault();

        const formData = new FormData(loginForm);
        const email = formData.get("email") as string;
        const password = formData.get("password") as string;

        authClient.signIn.email({
            email,
            password,
            callbackURL: "/ErickCReis/",
        });
    });
</script>
